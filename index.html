<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mico - AI Design Director</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-soft: #ff85a1;
            --primary-dark: #f06292;
            --bg-gradient: linear-gradient(135deg, #fff5f7 0%, #ffeef2 100%);
            --card-bg: rgba(255, 255, 255, 0.75);
            --text-color: #5d4046;
            --border-color: #ffd1dc;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Quicksand", "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
            background: var(--bg-gradient);
            color: var(--text-color);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* èƒŒæ™¯ã®ã‚­ãƒ©ã‚­ãƒ©ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        body::before {
            content: "";
            position: fixed;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            background-image: radial-gradient(circle, #fff 1px, transparent 1px);
            background-size: 50px 50px;
            animation: glitter 20s linear infinite;
            opacity: 0.4;
            z-index: -1;
        }
        @keyframes glitter {
            from { transform: translateY(0); }
            to { transform: translateY(-50px); }
        }

        /* ========== ãƒ˜ãƒƒãƒ€ãƒ¼ ========== */
        .app-header {
            background: linear-gradient(135deg, #ff85a1 0%, #f06292 50%, #ff7c98 100%);
            padding: 16px 40px;
            position: relative;
            box-shadow: 0 4px 20px rgba(240, 98, 146, 0.3);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-img {
            height: 40px;
            width: auto;
        }

        .logo-subtitle {
            color: rgba(255,255,255,0.85);
            font-size: 11px;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
            align-self: flex-end;
            padding-bottom: 2px;
        }

        .header-nav {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-item {
            color: rgba(255,255,255,0.9);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            padding: 10px 18px;
            border-radius: 20px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
        }
        .nav-item:hover {
            background: rgba(255,255,255,0.25);
            color: white;
            transform: translateY(-1px);
        }

        /* ========== ãƒ¢ãƒ¼ãƒ€ãƒ«å…±é€šã‚¹ã‚¿ã‚¤ãƒ« ========== */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(93, 64, 70, 0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.2s ease;
        }
        .modal-overlay.active {
            display: flex;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: white;
            border-radius: 24px;
            padding: 32px;
            max-width: 420px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(240, 98, 146, 0.3);
            animation: slideUp 0.3s ease;
            position: relative;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 32px;
            height: 32px;
            border: none;
            background: #ffeef2;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            color: var(--primary-dark);
            transition: all 0.2s;
        }
        .modal-close:hover {
            background: var(--primary-soft);
            color: white;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary-dark);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .modal-title-icon {
            font-size: 24px;
        }

        /* ========== Version ãƒ¢ãƒ¼ãƒ€ãƒ« ========== */
        .version-list {
            list-style: none;
        }
        .version-item {
            padding: 16px;
            background: #faf7f8;
            border-radius: 12px;
            margin-bottom: 12px;
            border-left: 4px solid var(--primary-soft);
        }
        .version-item:last-child {
            margin-bottom: 0;
        }
        .version-date {
            font-size: 12px;
            color: #a88;
            font-weight: 600;
            margin-bottom: 6px;
        }
        .version-desc {
            font-size: 14px;
            color: var(--text-color);
            line-height: 1.5;
        }

        /* ========== Settings ãƒ¢ãƒ¼ãƒ€ãƒ« ========== */
        .setting-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .setting-option {
            padding: 20px;
            background: #faf7f8;
            border: 2px solid transparent;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .setting-option:hover {
            background: #fff5f7;
            border-color: var(--border-color);
        }
        .setting-option.active {
            background: linear-gradient(135deg, #fff5f7 0%, #ffeef2 100%);
            border-color: var(--primary-soft);
            box-shadow: 0 4px 15px rgba(255, 133, 161, 0.2);
        }
        .setting-option-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 6px;
        }
        .setting-option-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-color);
        }
        .setting-option-badge {
            font-size: 11px;
            padding: 4px 10px;
            border-radius: 10px;
            font-weight: 600;
        }
        .setting-option[data-level="soft"] .setting-option-badge {
            background: #e8f5e9;
            color: #4caf50;
        }
        .setting-option[data-level="normal"] .setting-option-badge {
            background: #fff3e0;
            color: #ff9800;
        }
        .setting-option[data-level="hard"] .setting-option-badge {
            background: #fce4ec;
            color: #e91e63;
        }
        .setting-option-desc {
            font-size: 13px;
            color: #8a6d74;
            line-height: 1.4;
        }
        .setting-option.active .setting-option-title {
            color: var(--primary-dark);
        }

        /* ========== Contact ãƒ¢ãƒ¼ãƒ€ãƒ« ========== */
        .contact-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .form-label {
            font-size: 13px;
            font-weight: 600;
            color: #8a6d74;
        }
        .form-input, .form-textarea {
            padding: 14px 16px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            background: #faf7f8;
            color: var(--text-color);
            font-size: 14px;
            font-family: inherit;
            outline: none;
            transition: all 0.2s;
        }
        .form-input:focus, .form-textarea:focus {
            border-color: var(--primary-soft);
            background: white;
            box-shadow: 0 0 0 3px rgba(255, 133, 161, 0.1);
        }
        .form-textarea {
            resize: vertical;
            min-height: 120px;
            line-height: 1.5;
        }
        .form-submit {
            padding: 16px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(135deg, #ff85a1 0%, #f06292 100%);
            color: white;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }
        .form-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(240, 98, 146, 0.4);
        }
        .form-submit:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* é€ä¿¡å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
        .success-message {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }
        .success-message.show {
            display: block;
        }
        .success-icon {
            font-size: 60px;
            margin-bottom: 16px;
        }
        .success-text {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary-dark);
            margin-bottom: 8px;
        }
        .success-subtext {
            font-size: 14px;
            color: #8a6d74;
        }

        /* ========== ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ ========== */
        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 40px 20px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        /* Bento Gridé¢¨ã‚«ãƒ¼ãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³ */
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            border-radius: 24px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(255, 182, 193, 0.2);
            transition: transform 0.3s ease;
        }
        .card:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.85);
        }

        .section-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--primary-dark);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            border-left: 5px solid var(--primary-soft);
            padding-left: 12px;
            height: 24px;
        }

        /* å…¥åŠ›ã‚¨ãƒªã‚¢ */
        .input-group {
            margin-bottom: 20px;
        }
        .input-group:last-child {
            margin-bottom: 0;
        }
        .input-label {
            display: block;
            font-size: 13px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #8a6d74;
        }
        input, select, textarea {
            width: 100%;
            padding: 14px 16px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            background: #ffffff;
            color: var(--text-color);
            font-size: 15px;
            outline: none;
            box-sizing: border-box;
            transition: 0.2s;
            appearance: none;
            font-family: inherit;
        }
        textarea {
            resize: vertical;
            line-height: 1.5;
        }
        input:focus, textarea:focus, select:focus {
            border-color: var(--primary-soft);
            box-shadow: 0 0 0 3px rgba(255, 133, 161, 0.1);
        }
        input::placeholder, textarea::placeholder {
            color: #bfaeb3;
        }

        /* ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã®çŸ¢å° */
        select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%238a6d74' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            padding-right: 40px;
        }

        /* å‘ãé¸æŠï¼ˆãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³é¢¨ï¼‰ */
        .orientation-group {
            display: flex;
            gap: 12px;
        }
        .orientation-btn {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            background: white;
            color: var(--text-color);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            font-family: inherit;
        }
        .orientation-btn:hover {
            border-color: var(--primary-soft);
            background: #fff5f7;
        }
        .orientation-btn.active {
            border-color: var(--primary-dark);
            background: linear-gradient(135deg, #fff5f7 0%, #ffeef2 100%);
            color: var(--primary-dark);
        }

        /* ã‚«ãƒ©ãƒ¼ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ */
        .color-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .color-chip {
            width: 36px;
            height: 36px;
            border-radius: 6px;
            background: var(--chip-color);
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid rgba(0,0,0,0.1);
        }
        .color-chip:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        .color-chip.selected {
            border-color: var(--text-color);
            box-shadow: 0 0 0 2px white, 0 0 0 4px var(--text-color);
            transform: scale(1.1);
        }

        /* ãƒ¡ãƒ¼ã‚¿ãƒ¼ï¼ˆãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ï¼‰ */
        .progress-wrap {
            grid-column: span 2;
            height: 14px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 20px;
            margin: 10px 0;
            border: 1px solid #ffd1dc;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }
        .progress-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #ffb7c5, #f06292, #ffb7c5);
            background-size: 200% 100%;
            border-radius: 20px;
            transition: width 0.1s linear;
        }
        .progress-bar.animating {
            animation: shimmer 1.5s infinite linear;
        }
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* ç”Ÿæˆãƒœã‚¿ãƒ³ */
        .generate-btn {
            grid-column: span 2;
            padding: 22px;
            border-radius: 50px;
            border: none;
            background: linear-gradient(45deg, #ff85a1, #f06292, #ff9a8b, #ff85a1);
            background-size: 300% 300%;
            color: white;
            font-size: 18px;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(240, 98, 146, 0.35);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            animation: aurora 5s ease infinite;
            transition: transform 0.2s;
            font-family: inherit;
        }
        .generate-btn:hover {
            transform: scale(1.02);
        }
        .generate-btn:active {
            transform: scale(0.98);
        }
        .generate-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .sparkle-icon {
            display: inline-block;
            animation: blink 0.8s infinite alternate;
        }
        .sparkle-icon.delay { animation-delay: 0.4s; }

        @keyframes blink {
            0% { opacity: 0.3; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1.2); text-shadow: 0 0 8px #fff; }
        }
        @keyframes aurora {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* çµæœã‚¨ãƒªã‚¢ */
        .result-container {
            grid-column: span 2;
        }
        textarea.result-box {
            height: 450px;
            font-family: "Hiragino Kaku Gothic ProN", monospace;
            line-height: 1.7;
            background: #faf7f8;
            border: 1px dashed var(--primary-soft);
            color: #444;
            font-size: 14px;
        }
        .copy-btn {
            background: var(--text-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: 700;
            cursor: pointer;
            float: right;
            margin-top: 15px;
            transition: background 0.3s;
            font-family: inherit;
        }
        .copy-btn:hover {
            background: var(--primary-dark);
        }

        /* ç¾åœ¨ã®è¨­å®šè¡¨ç¤º */
        .current-level {
            grid-column: span 2;
            text-align: center;
            padding: 12px;
            background: rgba(255,255,255,0.6);
            border-radius: 12px;
            font-size: 13px;
            color: #8a6d74;
        }
        .current-level strong {
            color: var(--primary-dark);
        }

        /* ã‚¹ãƒãƒ›å¯¾å¿œ */
        @media (max-width: 768px) {
            .app-header {
                padding: 12px 16px;
            }
            .header-content {
                flex-wrap: wrap;
                gap: 12px;
            }
            .logo-img {
                height: 32px;
            }
            .logo-subtitle {
                font-size: 9px;
            }
            .header-nav {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
                gap: 8px;
            }
            .nav-item {
                padding: 8px 14px;
                font-size: 12px;
            }
            .container { 
                grid-template-columns: 1fr; 
                padding: 20px 15px;
            }
            .card, .result-container, .progress-wrap, .generate-btn, .current-level { 
                grid-column: span 1; 
            }
            .modal-content {
                margin: 20px;
                padding: 24px;
            }
        }
    </style>
</head>
<body>

<!-- ========== ã‚¢ãƒ—ãƒªãƒ˜ãƒƒãƒ€ãƒ¼ ========== -->
<header class="app-header">
    <div class="header-content">
        <div class="logo-container">
            <img src="https://raw.githubusercontent.com/komatsu-matsuko/image/main/mico%E7%99%BD%E6%8A%9C%E3%81%8D%E3%83%AD%E3%82%B3%E3%82%99.gif" alt="mico" class="logo-img">
            <span class="logo-subtitle">Add Depth to Design.</span>
        </div>
        <nav class="header-nav">
            <a class="nav-item" onclick="openModal('versionModal')">Version</a>
            <a class="nav-item" onclick="openModal('settingsModal')">Settings</a>
            <a class="nav-item" onclick="openModal('contactModal')">Contact</a>
        </nav>
    </div>
</header>

<!-- ========== Version ãƒ¢ãƒ¼ãƒ€ãƒ« ========== -->
<div class="modal-overlay" id="versionModal" onclick="closeModalOnOverlay(event)">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('versionModal')">Ã—</button>
        <h2 class="modal-title"><span class="modal-title-icon">ğŸ“‹</span>Version History</h2>
        <ul class="version-list">
            <li class="version-item">
                <div class="version-date">2025.01.07</div>
                <div class="version-desc">v1.1 ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ<br>ãƒ»åˆ¶ä½œç‰©ã‚µã‚¤ã‚ºé¸æŠè¿½åŠ <br>ãƒ»å‘ãé¸æŠï¼ˆã‚¿ãƒ†/ãƒ¨ã‚³ï¼‰è¿½åŠ <br>ãƒ»ãƒ†ã‚­ã‚¹ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³è¿½åŠ </div>
            </li>
            <li class="version-item">
                <div class="version-date">2025.01.07</div>
                <div class="version-desc">v1.0 ãƒªãƒªãƒ¼ã‚¹<br>ãƒ»åŸºæœ¬æ©Ÿèƒ½ã®å®Ÿè£…<br>ãƒ»Safari / éººæ˜‡ ç¥ã®æ‰‹ å¯¾å¿œ</div>
            </li>
            <li class="version-item">
                <div class="version-date">2025.01.06</div>
                <div class="version-desc">Î²ç‰ˆãƒ†ã‚¹ãƒˆ<br>ãƒ»UIãƒ‡ã‚¶ã‚¤ãƒ³èª¿æ•´<br>ãƒ»å‡ºåŠ›ãƒ¬ãƒ™ãƒ«æ©Ÿèƒ½è¿½åŠ </div>
            </li>
        </ul>
    </div>
</div>

<!-- ========== Settings ãƒ¢ãƒ¼ãƒ€ãƒ« ========== -->
<div class="modal-overlay" id="settingsModal" onclick="closeModalOnOverlay(event)">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('settingsModal')">Ã—</button>
        <h2 class="modal-title"><span class="modal-title-icon">âš™ï¸</span>Output Level</h2>
        <div class="setting-options">
            <div class="setting-option" data-level="soft" onclick="selectLevel('soft')">
                <div class="setting-option-header">
                    <span class="setting-option-title">Soft</span>
                    <span class="setting-option-badge">ç°¡æ˜“</span>
                </div>
                <div class="setting-option-desc">å¤§ã¾ã‹ãªæŒ‡ç¤ºæ›¸ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ãƒã‚¤ãƒ³ãƒˆã‚’çµã£ãŸã‚·ãƒ³ãƒ—ãƒ«ãªä»•æ§˜æ›¸å‘ã‘ã€‚</div>
            </div>
            <div class="setting-option active" data-level="normal" onclick="selectLevel('normal')">
                <div class="setting-option-header">
                    <span class="setting-option-title">Normal</span>
                    <span class="setting-option-badge">æ¨™æº–</span>
                </div>
                <div class="setting-option-desc">æ¨™æº–çš„ãªæŒ‡ç¤ºæ›¸ã‚’ç”Ÿæˆã—ã¾ã™ã€‚é€šå¸¸ã®ãƒ‡ã‚¶ã‚¤ãƒ³ä¾é ¼ã«æœ€é©ã€‚</div>
            </div>
            <div class="setting-option" data-level="hard" onclick="selectLevel('hard')">
                <div class="setting-option-header">
                    <span class="setting-option-title">Hard</span>
                    <span class="setting-option-badge">è©³ç´°</span>
                </div>
                <div class="setting-option-desc">ç´°ã‚„ã‹ãªæŒ‡ç¤ºæ›¸ã‚’ç”Ÿæˆã—ã¾ã™ã€‚è¤‡é›‘ãªæ¡ˆä»¶ã‚„æ–°è¦ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼å‘ã‘ã€‚</div>
            </div>
        </div>
    </div>
</div>

<!-- ========== Contact ãƒ¢ãƒ¼ãƒ€ãƒ« ========== -->
<div class="modal-overlay" id="contactModal" onclick="closeModalOnOverlay(event)">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal('contactModal')">Ã—</button>
        
        <!-- ãƒ•ã‚©ãƒ¼ãƒ  -->
        <div id="contactForm">
            <h2 class="modal-title"><span class="modal-title-icon">âœ‰ï¸</span>Contact</h2>
            <form class="contact-form" onsubmit="submitContact(event)">
                <div class="form-group">
                    <label class="form-label">ãŠåå‰</label>
                    <input type="text" class="form-input" id="contactName" placeholder="å±±ç”° å¤ªéƒ" required>
                </div>
                <div class="form-group">
                    <label class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                    <input type="email" class="form-input" id="contactEmail" placeholder="example@email.com" required>
                </div>
                <div class="form-group">
                    <label class="form-label">ãŠå•ã„åˆã‚ã›å†…å®¹</label>
                    <textarea class="form-textarea" id="contactMessage" placeholder="ã”è³ªå•ã‚„ã”è¦æœ›ã‚’ãŠæ›¸ããã ã•ã„" required></textarea>
                </div>
                <button type="submit" class="form-submit" id="submitBtn">é€ä¿¡ã™ã‚‹</button>
            </form>
        </div>

        <!-- é€ä¿¡å®Œäº† -->
        <div class="success-message" id="successMessage">
            <div class="success-icon">ğŸ‰</div>
            <div class="success-text">é€ä¿¡ã—ã¾ã—ãŸï¼</div>
            <div class="success-subtext">ãŠå•ã„åˆã‚ã›ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚<br>ç¢ºèªå¾Œã€ã”é€£çµ¡ã„ãŸã—ã¾ã™ã€‚</div>
        </div>
    </div>
</div>

<!-- ========== ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ ========== -->
<div class="container">
    <div class="card">
        <div class="section-title">åˆ¶ä½œã®åŸºæœ¬</div>
        
        <div class="input-group">
            <span class="input-label">æ¥­ç¨®é¸æŠ</span>
            <select id="industry" onchange="updatePatterns()">
                <option value="kaitori">è²·å–å°‚é–€åº—Safari</option>
                <option value="inshoku">éººæ˜‡ ç¥ã®æ‰‹</option>
                <option value="other">ãã®ä»–</option>
            </select>
        </div>

        <div class="input-group">
            <span class="input-label">åˆ¶ä½œç‰©ã®ç¨®é¡</span>
            <select id="mediaType">
                <optgroup label="åº—å†…ãƒ»åº—é ­">
                    <option value="åº—å†…è²©ä¿ƒPOPï¼ˆA4ï¼‰">åº—å†…è²©ä¿ƒPOPï¼ˆA4ï¼‰</option>
                    <option value="åº—å†…è²©ä¿ƒPOPï¼ˆB5ï¼‰">åº—å†…è²©ä¿ƒPOPï¼ˆB5ï¼‰</option>
                    <option value="åº—é ­ãƒã‚¹ã‚¿ãƒ¼ï¼ˆA1ï¼‰">åº—é ­ãƒã‚¹ã‚¿ãƒ¼ï¼ˆA1ï¼‰</option>
                    <option value="åº—é ­ãƒã‚¹ã‚¿ãƒ¼ï¼ˆB1ï¼‰">åº—é ­ãƒã‚¹ã‚¿ãƒ¼ï¼ˆB1ï¼‰</option>
                    <option value="åº—é ­ãƒã‚¹ã‚¿ãƒ¼ï¼ˆA2ï¼‰">åº—é ­ãƒã‚¹ã‚¿ãƒ¼ï¼ˆA2ï¼‰</option>
                    <option value="å“ä¸ŠPOPï¼ˆA6ï¼‰">å“ä¸ŠPOPï¼ˆA6ï¼‰</option>
                    <option value="å“ä¸ŠPOPï¼ˆãƒã‚¬ã‚­ã‚µã‚¤ã‚ºï¼‰">å“ä¸ŠPOPï¼ˆãƒã‚¬ã‚­ã‚µã‚¤ã‚ºï¼‰</option>
                    <option value="ã®ã¼ã‚Šãƒ»çœ‹æ¿">ã®ã¼ã‚Šãƒ»çœ‹æ¿</option>
                </optgroup>
                <optgroup label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ»ãƒãƒ©ã‚·">
                    <option value="ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ï¼ˆA4ï¼‰">ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ï¼ˆA4ï¼‰</option>
                    <option value="ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ï¼ˆB4ï¼‰">ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ï¼ˆB4ï¼‰</option>
                    <option value="æŠ˜è¾¼ãƒãƒ©ã‚·ï¼ˆA4ï¼‰">æŠ˜è¾¼ãƒãƒ©ã‚·ï¼ˆA4ï¼‰</option>
                    <option value="æŠ˜è¾¼ãƒãƒ©ã‚·ï¼ˆB4ï¼‰">æŠ˜è¾¼ãƒãƒ©ã‚·ï¼ˆB4ï¼‰</option>
                </optgroup>
                <optgroup label="Webåª’ä½“">
                    <option value="Instagramãƒ•ã‚£ãƒ¼ãƒ‰ï¼ˆ1:1ï¼‰">Instagramãƒ•ã‚£ãƒ¼ãƒ‰ï¼ˆ1:1ï¼‰</option>
                    <option value="Instagramã‚¹ãƒˆãƒ¼ãƒªãƒ¼ï¼ˆ9:16ï¼‰">Instagramã‚¹ãƒˆãƒ¼ãƒªãƒ¼ï¼ˆ9:16ï¼‰</option>
                    <option value="LINEãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼">LINEãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼</option>
                    <option value="ãƒãƒŠãƒ¼åºƒå‘Š">ãƒãƒŠãƒ¼åºƒå‘Š</option>
                </optgroup>
            </select>
        </div>

        <div class="input-group">
            <span class="input-label">å‘ã</span>
            <div class="orientation-group">
                <button type="button" class="orientation-btn active" data-orientation="vertical" onclick="selectOrientation('vertical')">ã‚¿ãƒ†å‹</button>
                <button type="button" class="orientation-btn" data-orientation="horizontal" onclick="selectOrientation('horizontal')">ãƒ¨ã‚³å‹</button>
            </div>
        </div>

        <div class="input-group">
            <span class="input-label">ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³</span>
            <select id="designPattern"></select>
        </div>
    </div>

    <div class="card">
        <div class="section-title">ãƒ†ã‚­ã‚¹ãƒˆãƒ»å†…å®¹</div>
        
        <div class="input-group">
            <span class="input-label">ç›®ç«‹ãŸã›ãŸã„æ–‡å­—</span>
            <textarea id="highlightText" style="height:80px;" placeholder="ä¾‹ï¼šé«˜ä¾¡è²·å–ã€æœŸé–“é™å®šã€50%OFF ãªã©&#10;å¼·èª¿ã—ãŸã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›"></textarea>
        </div>

        <div class="input-group">
            <span class="input-label">ä½¿ç”¨ã‚«ãƒ©ãƒ¼ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</span>
            <div class="color-selector">
                <div class="color-chip" data-color="èµ¤" style="--chip-color: #e57373;" onclick="toggleColor(this)"></div>
                <div class="color-chip" data-color="ã‚ªãƒ¬ãƒ³ã‚¸" style="--chip-color: #ffb74d;" onclick="toggleColor(this)"></div>
                <div class="color-chip" data-color="é»„" style="--chip-color: #fff176;" onclick="toggleColor(this)"></div>
                <div class="color-chip" data-color="é»„ç·‘" style="--chip-color: #aed581;" onclick="toggleColor(this)"></div>
                <div class="color-chip" data-color="ç·‘" style="--chip-color: #81c784;" onclick="toggleColor(this)"></div>
                <div class="color-chip" data-color="æ°´è‰²" style="--chip-color: #4dd0e1;" onclick="toggleColor(this)"></div>
                <div class="color-chip" data-color="é’" style="--chip-color: #64b5f6;" onclick="toggleColor(this)"></div>
                <div class="color-chip" data-color="ç´«" style="--chip-color: #ba68c8;" onclick="toggleColor(this)"></div>
                <div class="color-chip" data-color="ãƒ”ãƒ³ã‚¯" style="--chip-color: #f48fb1;" onclick="toggleColor(this)"></div>
                <div class="color-chip" data-color="ãƒ™ãƒ¼ã‚¸ãƒ¥" style="--chip-color: #d7ccc8;" onclick="toggleColor(this)"></div>
                <div class="color-chip" data-color="èŒ¶" style="--chip-color: #a1887f;" onclick="toggleColor(this)"></div>
                <div class="color-chip" data-color="ã‚°ãƒ¬ãƒ¼" style="--chip-color: #b0bec5;" onclick="toggleColor(this)"></div>
                <div class="color-chip" data-color="é»’" style="--chip-color: #424242;" onclick="toggleColor(this)"></div>
                <div class="color-chip" data-color="ç™½" style="--chip-color: #fafafa;" onclick="toggleColor(this)"></div>
                <div class="color-chip" data-color="ã‚´ãƒ¼ãƒ«ãƒ‰" style="--chip-color: linear-gradient(135deg, #d4a84b, #f5d998, #d4a84b);" onclick="toggleColor(this)"></div>
                <div class="color-chip" data-color="ã‚·ãƒ«ãƒãƒ¼" style="--chip-color: linear-gradient(135deg, #b0b0b0, #e8e8e8, #b0b0b0);" onclick="toggleColor(this)"></div>
            </div>
        </div>

        <div class="input-group">
            <span class="input-label">è£œè¶³ï¼ˆæœŸé–“ã‚„è¡¨è¨˜ã™ã¹ãæƒ…å ±ï¼‰</span>
            <input type="text" id="conditions" placeholder="ä¾‹ï¼šé€±æœ«é™å®šã€ãªããªã‚Šæ¬¡ç¬¬çµ‚äº†">
        </div>
    </div>

    <div class="card">
        <div class="section-title">ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ»ãŠå®¢æ§˜ã®ã‚´ãƒ¼ãƒ«</div>
        
        <div class="input-group">
            <span class="input-label">ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè©³ç´°</span>
            <input type="text" id="targetDetail" placeholder="ä¾‹ï¼š30ä»£ã€œ40ä»£ã®åƒãå¥³æ€§">
        </div>

        <div class="input-group">
            <span class="input-label">ãŠå®¢æ§˜ã®ã‚´ãƒ¼ãƒ«</span>
            <textarea id="customerGoal" style="height:115px;" placeholder="ä¾‹ï¼šåº—èˆ—ãƒ­ã‚´ã€QRã‚³ãƒ¼ãƒ‰ã€é›»è©±ç•ªå·ã€InstagramID"></textarea>
        </div>
    </div>

    <div class="card">
        <div class="section-title">ç´ æãƒ»ç¦æ­¢äº‹é …</div>
        
        <div class="input-group">
            <span class="input-label">ä½¿ç”¨ã™ã‚‹å†™çœŸãƒ»ç´ æ</span>
            <select id="photoSource">
                <option value="æ”¯çµ¦å†™çœŸã‚ã‚Šï¼ˆãƒ—ãƒ­æ’®å½±ï¼‰">æ”¯çµ¦å†™çœŸã‚ã‚Šï¼ˆãƒ—ãƒ­æ’®å½±ï¼‰</option>
                <option value="æ”¯çµ¦å†™çœŸã‚ã‚Šï¼ˆã‚¹ãƒãƒ›æ’®å½±ï¼‰">æ”¯çµ¦å†™çœŸã‚ã‚Šï¼ˆã‚¹ãƒãƒ›æ’®å½±ï¼‰</option>
                <option value="ç´ æã‚µã‚¤ãƒˆã®ç”»åƒã‚’ä½¿ç”¨">ç´ æã‚µã‚¤ãƒˆã®ç”»åƒã‚’ä½¿ç”¨</option>
                <option value="æ–‡å­—ã®ã¿ã§æ§‹æˆ">æ–‡å­—ã®ã¿ã§æ§‹æˆ</option>
            </select>
        </div>

        <div class="input-group">
            <span class="input-label">NGãƒ«ãƒ¼ãƒ«</span>
            <textarea id="ngRules" style="height:105px;" placeholder="ä¾‹ï¼šé’è‰²ã¯ä½¿ç”¨ã—ãªã„ã€è‹±èªã¯ã‚«ã‚¿ã‚«ãƒŠè¡¨è¨˜ã«ã™ã‚‹ã€ãªã©"></textarea>
        </div>
    </div>

    <div class="current-level">
        ç¾åœ¨ã®å‡ºåŠ›ãƒ¬ãƒ™ãƒ«: <strong id="currentLevelDisplay">Normalï¼ˆæ¨™æº–ï¼‰</strong>
    </div>

    <div class="progress-wrap" id="progressWrap">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <button class="generate-btn" id="generateBtn" onclick="generatePrompt()">
        <span class="sparkle-icon">âœ¨</span>
        Generate Magic Prompt
        <span class="sparkle-icon delay">âœ¨</span>
    </button>

    <div class="card result-container">
        <div class="section-title">Generated Prompt</div>
        <textarea id="outputPrompt" class="result-box" readonly placeholder="ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€ã“ã“ã«ä»•æ§˜æ›¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™..."></textarea>
        <button class="copy-btn" onclick="copyToClipboard()">Copy to Clipboard</button>
    </div>
</div>

<script>
    const API_KEY = 'AIzaSyAtAv0IQ3E3BHexV7yGTHzS0PYJeOAnQq8';

    // å‡ºåŠ›ãƒ¬ãƒ™ãƒ«ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: normalï¼‰
    let outputLevel = 'normal';
    // å‘ãï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: verticalï¼‰
    let orientation = 'vertical';
    // é¸æŠã•ã‚ŒãŸã‚«ãƒ©ãƒ¼
    let selectedColors = [];

    // ãƒ¢ãƒ¼ãƒ€ãƒ«åˆ¶å¾¡
    function openModal(modalId) {
        document.getElementById(modalId).classList.add('active');
        document.body.style.overflow = 'hidden';
        
        if (modalId === 'contactModal') {
            document.getElementById('contactForm').style.display = 'block';
            document.getElementById('successMessage').classList.remove('show');
        }
    }

    function closeModal(modalId) {
        document.getElementById(modalId).classList.remove('active');
        document.body.style.overflow = '';
    }

    function closeModalOnOverlay(event) {
        if (event.target.classList.contains('modal-overlay')) {
            event.target.classList.remove('active');
            document.body.style.overflow = '';
        }
    }

    // å‡ºåŠ›ãƒ¬ãƒ™ãƒ«é¸æŠ
    function selectLevel(level) {
        outputLevel = level;
        
        document.querySelectorAll('.setting-option').forEach(opt => {
            opt.classList.toggle('active', opt.dataset.level === level);
        });

        const levelText = {
            'soft': 'Softï¼ˆç°¡æ˜“ï¼‰',
            'normal': 'Normalï¼ˆæ¨™æº–ï¼‰',
            'hard': 'Hardï¼ˆè©³ç´°ï¼‰'
        };
        document.getElementById('currentLevelDisplay').textContent = levelText[level];

        setTimeout(() => closeModal('settingsModal'), 300);
    }

    // å‘ãé¸æŠ
    function selectOrientation(orient) {
        orientation = orient;
        document.querySelectorAll('.orientation-btn').forEach(btn => {
            btn.classList.toggle('active', btn.dataset.orientation === orient);
        });
    }

    // ã‚«ãƒ©ãƒ¼é¸æŠãƒˆã‚°ãƒ«
    function toggleColor(element) {
        const color = element.dataset.color;
        element.classList.toggle('selected');
        
        if (element.classList.contains('selected')) {
            if (!selectedColors.includes(color)) {
                selectedColors.push(color);
            }
        } else {
            selectedColors = selectedColors.filter(c => c !== color);
        }
    }

    // ãŠå•ã„åˆã‚ã›é€ä¿¡
    function submitContact(event) {
        event.preventDefault();
        
        const name = document.getElementById('contactName').value;
        const email = document.getElementById('contactEmail').value;
        const message = document.getElementById('contactMessage').value;
        
        const submitBtn = document.getElementById('submitBtn');
        submitBtn.disabled = true;
        submitBtn.textContent = 'é€ä¿¡ä¸­...';

        const mailtoLink = `mailto:n.yoshiura@bremen.band?subject=${encodeURIComponent('[mico] ãŠå•ã„åˆã‚ã›')}&body=${encodeURIComponent(`ãŠåå‰: ${name}\nãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: ${email}\n\nãŠå•ã„åˆã‚ã›å†…å®¹:\n${message}`)}`;
        
        window.location.href = mailtoLink;

        setTimeout(() => {
            document.getElementById('contactForm').style.display = 'none';
            document.getElementById('successMessage').classList.add('show');
            
            document.getElementById('contactName').value = '';
            document.getElementById('contactEmail').value = '';
            document.getElementById('contactMessage').value = '';
            submitBtn.disabled = false;
            submitBtn.textContent = 'é€ä¿¡ã™ã‚‹';
        }, 500);
    }

    // ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆæ‹¡å¼µç‰ˆï¼‰
    const patterns = {
        kaitori: [
            {val: "â‘ ãƒŠãƒãƒ¥ãƒ©ãƒ«", label: "ãƒŠãƒãƒ¥ãƒ©ãƒ«ï¼ˆè¦ªã—ã¿ã‚„ã™ã•ï¼‰"},
            {val: "â‘¡ã‹ã‚ã„ã„", label: "ã‹ã‚ã„ã„ï¼ˆå¥³æ€§ãƒ»æ•´ç†ï¼‰"},
            {val: "â‘¢ã¾ã˜ã‚", label: "ã¾ã˜ã‚ï¼ˆè³‡ç”£ãƒ»éºå“ï¼‰"},
            {val: "â‘£é«˜ç´š", label: "é«˜ç´šï¼ˆãƒ–ãƒ©ãƒ³ãƒ‰ãƒ»å®çŸ³ï¼‰"},
            {val: "â‘¤ãƒ¬ãƒˆãƒ­", label: "ãƒ¬ãƒˆãƒ­ï¼ˆæ˜­å’Œãƒ»æ‡ã‹ã—ã•ï¼‰"},
            {val: "â‘¥ãƒãƒƒãƒ—", label: "ãƒãƒƒãƒ—ï¼ˆæ˜ã‚‹ã„ãƒ»ã‚«ãƒ©ãƒ•ãƒ«ï¼‰"},
            {val: "â‘¦ã‚·ãƒ–ã„", label: "ã‚·ãƒ–ã„ï¼ˆè½ã¡ç€ããƒ»æ¸‹ã‚ï¼‰"},
            {val: "â‘§ãƒ¢ãƒ€ãƒ³", label: "ãƒ¢ãƒ€ãƒ³ï¼ˆç¾ä»£çš„ãƒ»æ´—ç·´ï¼‰"},
            {val: "â‘¨ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆ", label: "ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆï¼ˆä¸Šå“ãƒ»å„ªé›…ï¼‰"},
            {val: "â‘©ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«", label: "ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ï¼ˆæ°—è»½ãƒ»è¦ªè¿‘æ„Ÿï¼‰"}
        ],
        inshoku: [
            {val: "â‘ ãƒŠãƒãƒ¥ãƒ©ãƒ«", label: "ãƒŠãƒãƒ¥ãƒ©ãƒ«ï¼ˆã‚·ã‚ºãƒ«æ„Ÿï¼‰"},
            {val: "â‘¡å’Œé¢¨", label: "å’Œé¢¨ï¼ˆæƒ…ç·’ãƒ»è€èˆ—ï¼‰"},
            {val: "â‘¢é«˜ç´š", label: "é«˜ç´šï¼ˆæ´—ç·´ãƒ»é‡åšæ„Ÿï¼‰"},
            {val: "â‘£ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰", label: "ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ‰ï¼ˆæµ·å¤–å‘ã‘ï¼‰"},
            {val: "â‘¤ã‹ã‚ã„ã„", label: "ã‹ã‚ã„ã„ï¼ˆå¥³æ€§å‘ã‘ãƒ»SNSæ˜ ãˆï¼‰"},
            {val: "â‘¥å±…é…’å±‹", label: "å±…é…’å±‹ï¼ˆæ´»æ°—ãƒ»è³‘ã‚ã„ï¼‰"},
            {val: "â‘¦ãƒ©ãƒ¼ãƒ¡ãƒ³", label: "ãƒ©ãƒ¼ãƒ¡ãƒ³ï¼ˆåŠ›å¼·ã•ãƒ»é£Ÿæ¬²è¨´æ±‚ï¼‰"},
            {val: "â‘§ã‚¹ãƒˆãƒªãƒ¼ãƒˆ", label: "ã‚¹ãƒˆãƒªãƒ¼ãƒˆï¼ˆè‹¥è€…å‘ã‘ãƒ»ã‚«ãƒ«ãƒãƒ£ãƒ¼ï¼‰"},
            {val: "â‘¨ã‚¯ãƒ©ã‚·ãƒƒã‚¯", label: "ã‚¯ãƒ©ã‚·ãƒƒã‚¯ï¼ˆä¼çµ±ãƒ»æ ¼å¼ï¼‰"},
            {val: "â‘©ãƒãƒƒãƒ—", label: "ãƒãƒƒãƒ—ï¼ˆæ˜ã‚‹ã„ãƒ»è¦ªã—ã¿ã‚„ã™ã„ï¼‰"}
        ],
        other: [
            {val: "â‘ ã‚·ãƒ³ãƒ—ãƒ«", label: "ã‚·ãƒ³ãƒ—ãƒ«ï¼ˆãƒŸãƒ‹ãƒãƒ«ãƒ»ä½™ç™½é‡è¦–ï¼‰"},
            {val: "â‘¡ãƒãƒƒãƒ—", label: "ãƒãƒƒãƒ—ï¼ˆæ˜ã‚‹ã„ãƒ»ã‚«ãƒ©ãƒ•ãƒ«ï¼‰"},
            {val: "â‘¢ã‹ã‚ã„ã„", label: "ã‹ã‚ã„ã„ï¼ˆå¥³æ€§å‘ã‘ãƒ»ã‚„ã‚ã‚‰ã‹ã„ï¼‰"},
            {val: "â‘£ã‚¯ãƒ¼ãƒ«", label: "ã‚¯ãƒ¼ãƒ«ï¼ˆæ´—ç·´ãƒ»ã‚¹ã‚¿ã‚¤ãƒªãƒƒã‚·ãƒ¥ï¼‰"},
            {val: "â‘¤ãƒ€ãƒ¼ã‚¯", label: "ãƒ€ãƒ¼ã‚¯ï¼ˆé‡åšãƒ»é«˜ç´šæ„Ÿï¼‰"},
            {val: "â‘¥ãƒ›ãƒƒãƒˆ", label: "ãƒ›ãƒƒãƒˆï¼ˆæƒ…ç†±ãƒ»ã‚¨ãƒãƒ«ã‚®ãƒƒã‚·ãƒ¥ï¼‰"},
            {val: "â‘¦ãƒŠãƒãƒ¥ãƒ©ãƒ«", label: "ãƒŠãƒãƒ¥ãƒ©ãƒ«ï¼ˆè‡ªç„¶ãƒ»ã‚ªãƒ¼ã‚¬ãƒ‹ãƒƒã‚¯ï¼‰"},
            {val: "â‘§ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆ", label: "ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆï¼ˆä¸Šå“ãƒ»å„ªé›…ï¼‰"},
            {val: "â‘¨ãƒ¬ãƒˆãƒ­", label: "ãƒ¬ãƒˆãƒ­ï¼ˆæ‡ã‹ã—ã•ãƒ»ãƒ´ã‚£ãƒ³ãƒ†ãƒ¼ã‚¸ï¼‰"},
            {val: "â‘©ãƒ¢ãƒ€ãƒ³", label: "ãƒ¢ãƒ€ãƒ³ï¼ˆç¾ä»£çš„ãƒ»å…ˆé€²çš„ï¼‰"}
        ]
    };

    document.addEventListener('DOMContentLoaded', updatePatterns);

    function updatePatterns() {
        const industrySelect = document.getElementById("industry");
        const patternSelect = document.getElementById("designPattern");
        
        if (!industrySelect || !patternSelect) return;

        const industry = industrySelect.value;
        patternSelect.innerHTML = "";
        
        patterns[industry].forEach(p => {
            const opt = document.createElement("option");
            opt.value = p.val;
            opt.innerText = p.label;
            patternSelect.appendChild(opt);
        });
    }

    async function generatePrompt() {
        const btn = document.getElementById('generateBtn');
        const output = document.getElementById('outputPrompt');
        const wrap = document.getElementById('progressWrap');
        const bar = document.getElementById('progressBar');

        if(!API_KEY || API_KEY.includes('YOUR_GEMINI')) { 
            alert('APIã‚­ãƒ¼ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚'); 
            return; 
        }

        btn.disabled = true;
        bar.style.width = "0%";
        bar.classList.add('animating');
        output.value = "";
        
        let width = 0;
        const interval = setInterval(() => {
            if (width >= 90) {
                clearInterval(interval);
            } else {
                width += (95 - width) * 0.1;
                if(width < 1) width = 1;
                bar.style.width = width + '%';
            }
        }, 100);

        const orientationText = orientation === 'vertical' ? 'ã‚¿ãƒ†å‹' : 'ãƒ¨ã‚³å‹';

        const data = {
            industry: document.getElementById("industry").options[document.getElementById("industry").selectedIndex].text,
            media: document.getElementById("mediaType").value,
            orientation: orientationText,
            pattern: document.getElementById("designPattern").value,
            highlightText: document.getElementById("highlightText").value || "æœªæŒ‡å®š",
            colors: selectedColors.length > 0 ? selectedColors.join("ã€") : "æœªæŒ‡å®š",
            conditions: document.getElementById("conditions").value || "ãªã—",
            target: document.getElementById("targetDetail").value || "ä¸€èˆ¬å±¤",
            goal: document.getElementById("customerGoal").value || "æœªè¨­å®š",
            photo: document.getElementById("photoSource").value,
            ng: document.getElementById("ngRules").value || "ç‰¹ã«ãªã—"
        };

        // ãƒ©ãƒ•ãƒ‡ã‚¶ã‚¤ãƒ³æ”¹å–„ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
        let instruction;
        
        if (outputLevel === 'soft') {
            instruction = `ã‚ãªãŸã¯ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ã‚¿ãƒ¼ã§ã™ã€‚ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ãŒä½œæˆã—ãŸãƒ©ãƒ•ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆç°¡å˜ãªå†™çœŸé…ç½®ã¨æ–‡å­—å…¥ã‚Œï¼‰ã‚’ã€ã‚ˆã‚Šé­…åŠ›çš„ãªè²©ä¿ƒç‰©ã«ä»•ä¸Šã’ã‚‹ãŸã‚ã®æ”¹å–„æŒ‡ç¤ºã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚

ã€ãƒ©ãƒ•ãƒ‡ã‚¶ã‚¤ãƒ³ã®æƒ…å ±ã€‘
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ: ${data.industry}
- åˆ¶ä½œç‰©: ${data.media}ï¼ˆ${data.orientation}ï¼‰
- ãƒˆãƒ³ãƒãƒŠ: ${data.pattern}
- ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: ${data.target}
- ç›®ç«‹ãŸã›ãŸã„æ–‡å­—: ${data.highlightText}
- ä½¿ç”¨ã‚«ãƒ©ãƒ¼: ${data.colors}
- è£œè¶³æƒ…å ±: ${data.conditions}
- ç´ æ: ${data.photo}
- NGäº‹é …: ${data.ng}
- CVå°ç·š: ${data.goal}

ã€å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€‘å¿…ãšä»¥ä¸‹ã®å½¢å¼ã§å‡ºåŠ›ã™ã‚‹ã“ã¨ã€‚

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ãƒ‡ã‚¶ã‚¤ãƒ³æ”¹å–„æŒ‡ç¤ºæ›¸
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€1. æ–‡å­—ã®è£…é£¾ãƒ»å¼·èª¿ã€‘
ãƒ»ç›®ç«‹ãŸã›ãŸã„æ–‡å­—ã€Œ${data.highlightText}ã€ã®æ”¹å–„: ï¼ˆãƒ•ã‚©ãƒ³ãƒˆé¸ã³ã€ã‚µã‚¤ã‚ºæ„Ÿã€è£…é£¾åŠ¹æœã‚’å…·ä½“çš„ã«æŒ‡ç¤ºï¼‰
ãƒ»ä½¿ç”¨ã‚«ãƒ©ãƒ¼ã€Œ${data.colors}ã€ã®æ´»ã‹ã—æ–¹: ï¼ˆé…è‰²ã€ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã®ä½¿ã„æ–¹ï¼‰
ãƒ»è£œè¶³æ–‡å­—ã®å‡¦ç†: ï¼ˆèª­ã¿ã‚„ã™ã•ã€ãƒãƒ©ãƒ³ã‚¹ã‚’æŒ‡ç¤ºï¼‰

ã€2. ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´ã€‘
ãƒ»è¦–ç·šèª˜å°ã®æ”¹å–„: ï¼ˆè¦ç´ ã®å†é…ç½®ãƒã‚¤ãƒ³ãƒˆã‚’æŒ‡ç¤ºï¼‰
ãƒ»ä½™ç™½ã®èª¿æ•´: ï¼ˆè©°ã‚ã‚‹/åºƒã’ã‚‹ç®‡æ‰€ã‚’å…·ä½“çš„ã«æŒ‡ç¤ºï¼‰
ãƒ»ãƒãƒ©ãƒ³ã‚¹æ”¹å–„: ï¼ˆé‡å¿ƒã€ã¾ã¨ã¾ã‚Šæ„Ÿã®èª¿æ•´ã‚’æŒ‡ç¤ºï¼‰

ã€3. ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«å¼·åŒ–ã€‘
ãƒ»å†™çœŸ/ç´ æã®å‡¦ç†: ï¼ˆãƒˆãƒªãƒŸãƒ³ã‚°ã€è‰²èª¿ã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’æŒ‡ç¤ºï¼‰
ãƒ»è£…é£¾è¦ç´ ã®è¿½åŠ : ï¼ˆã‚ã—ã‚‰ã„ã€ãƒ•ãƒ¬ãƒ¼ãƒ ã€èƒŒæ™¯å‡¦ç†ã‚’ææ¡ˆï¼‰

ã€4. è¨´æ±‚åŠ›ã‚¢ãƒƒãƒ—ã®ãƒã‚¤ãƒ³ãƒˆã€‘
ãƒ»ã€Œ${data.pattern}ã€ã‚‰ã—ã•ã‚’å‡ºã™ãŸã‚ã®å…·ä½“çš„ãªæ¼”å‡º
ãƒ»ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«éŸ¿ããƒ‡ã‚¶ã‚¤ãƒ³è¦ç´ 

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€é‡è¦ãªæŒ‡ç¤ºã€‘
- å¿…ãšã€Œâ”â”â”ã€ã®è£…é£¾ç·šã‹ã‚‰å‡ºåŠ›ã‚’é–‹å§‹ã™ã‚‹ã“ã¨
- æŒ¨æ‹¶ã€å‰ç½®ãã€èª¬æ˜ã¯ä¸€åˆ‡ç¦æ­¢
- ã€Œ${data.pattern}ã€ã®ãƒˆãƒ³ãƒãƒŠã«åˆã£ãŸå…·ä½“çš„ãªæ”¹å–„æ¡ˆã‚’å‡ºã™ã“ã¨
- ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ãŒã™ãä½œæ¥­ã§ãã‚‹å…·ä½“çš„ãªæŒ‡ç¤ºã«ã™ã‚‹ã“ã¨`;

        } else if (outputLevel === 'hard') {
            instruction = `ã‚ãªãŸã¯ã‚·ãƒ‹ã‚¢ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ã‚¿ãƒ¼ã§ã™ã€‚ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ãŒä½œæˆã—ãŸãƒ©ãƒ•ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆç°¡å˜ãªå†™çœŸé…ç½®ã¨æ–‡å­—å…¥ã‚Œï¼‰ã‚’ã€ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãªè²©ä¿ƒç‰©ã«ä»•ä¸Šã’ã‚‹ãŸã‚ã®è©³ç´°ãªæ”¹å–„æŒ‡ç¤ºã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚

ã€ãƒ©ãƒ•ãƒ‡ã‚¶ã‚¤ãƒ³ã®æƒ…å ±ã€‘
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ: ${data.industry}
- åˆ¶ä½œç‰©: ${data.media}ï¼ˆ${data.orientation}ï¼‰
- ãƒˆãƒ³ãƒãƒŠ: ${data.pattern}
- ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: ${data.target}
- ç›®ç«‹ãŸã›ãŸã„æ–‡å­—: ${data.highlightText}
- ä½¿ç”¨ã‚«ãƒ©ãƒ¼: ${data.colors}
- è£œè¶³æƒ…å ±: ${data.conditions}
- ç´ æ: ${data.photo}
- NGäº‹é …: ${data.ng}
- CVå°ç·š: ${data.goal}

ã€å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€‘å¿…ãšä»¥ä¸‹ã®å½¢å¼ã§å‡ºåŠ›ã™ã‚‹ã“ã¨ã€‚

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ãƒ‡ã‚¶ã‚¤ãƒ³æ”¹å–„æŒ‡ç¤ºæ›¸ã€è©³ç´°ç‰ˆã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€1. ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£ã®æ”¹å–„ã€‘
â–¼ ç›®ç«‹ãŸã›ãŸã„æ–‡å­—ã€Œ${data.highlightText}ã€
ãƒ»æ¨å¥¨ãƒ•ã‚©ãƒ³ãƒˆ: ï¼ˆå…·ä½“çš„ãªãƒ•ã‚©ãƒ³ãƒˆåã¾ãŸã¯ç³»çµ±ã‚’æŒ‡å®šï¼‰
ãƒ»æ–‡å­—ã‚µã‚¤ã‚º: ï¼ˆã‚¸ãƒ£ãƒ³ãƒ—ç‡ã‚’è€ƒæ…®ã—ãŸå…·ä½“çš„ãªæŒ‡ç¤ºï¼‰
ãƒ»è£…é£¾åŠ¹æœ: ï¼ˆã‚·ãƒ£ãƒ‰ã‚¦ã€ç¸å–ã‚Šã€ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ç­‰ã®å…·ä½“æ¡ˆï¼‰
ãƒ»æ–‡å­—çµ„ã¿: ï¼ˆã‚«ãƒ¼ãƒ‹ãƒ³ã‚°ã€è¡Œé–“ã®èª¿æ•´æŒ‡ç¤ºï¼‰

â–¼ ä½¿ç”¨ã‚«ãƒ©ãƒ¼ã€Œ${data.colors}ã€ã®æ´»ç”¨
ãƒ»ãƒ¡ã‚¤ãƒ³ã‚«ãƒ©ãƒ¼ã®é…ç½®: ï¼ˆã©ã®è¦ç´ ã«ã©ã†ä½¿ã†ã‹ï¼‰
ãƒ»ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã¨ã—ã¦ã®ä½¿ã„æ–¹: ï¼ˆå¼·èª¿ãƒã‚¤ãƒ³ãƒˆã€å·®ã—è‰²ï¼‰
ãƒ»ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³/é…è‰²ãƒ‘ã‚¿ãƒ¼ãƒ³: ï¼ˆå…·ä½“çš„ãªçµ„ã¿åˆã‚ã›ææ¡ˆï¼‰

â–¼ è£œè¶³ãƒ†ã‚­ã‚¹ãƒˆ
ãƒ»ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã®ãƒãƒ©ãƒ³ã‚¹: ï¼ˆãƒ¡ã‚¤ãƒ³ã¨ã®æ¯”ç‡ï¼‰
ãƒ»å¯èª­æ€§ã®ç¢ºä¿: ï¼ˆè¡Œé–“ã€æ–‡å­—é–“ã®èª¿æ•´ï¼‰

ã€2. ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ»æ§‹æˆã®æ”¹å–„ã€‘
â–¼ è¦–ç·šèª˜å°ã®æœ€é©åŒ–
ãƒ»ã‚¢ã‚¤ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ: ï¼ˆZå­—/Få­—/Nå­—ç­‰ã€å…·ä½“çš„ãªèª˜å°ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
ãƒ»ãƒ•ã‚©ãƒ¼ã‚«ãƒ«ãƒã‚¤ãƒ³ãƒˆã®å¼·åŒ–: ï¼ˆè¦–ç·šãŒæœ€åˆã«è¡Œãå ´æ‰€ã®èª¿æ•´ï¼‰
ãƒ»æƒ…å ±ã®å„ªå…ˆé †ä½: ï¼ˆè¦ç´ ã®é…ç½®é †åºã®è¦‹ç›´ã—ï¼‰

â–¼ ä½™ç™½ãƒ»é–“éš”ã®èª¿æ•´
ãƒ»ãƒ›ãƒ¯ã‚¤ãƒˆã‚¹ãƒšãƒ¼ã‚¹ã®æ´»ç”¨: ï¼ˆåºƒã’ã‚‹/è©°ã‚ã‚‹ç®‡æ‰€ã‚’å…·ä½“çš„ã«ï¼‰
ãƒ»ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°: ï¼ˆé–¢é€£è¦ç´ ã®ã¾ã¨ã‚æ–¹ï¼‰
ãƒ»ãƒ–ãƒªãƒ¼ã‚¸ãƒ³ã‚°ãƒ«ãƒ¼ãƒ : ï¼ˆè¦ç´ é–“ã®é©åˆ‡ãªè·é›¢æ„Ÿï¼‰

â–¼ ã‚°ãƒªãƒƒãƒ‰ãƒ»æ•´åˆ—
ãƒ»æƒãˆã‚‹ã¹ããƒ©ã‚¤ãƒ³: ï¼ˆå·¦æƒãˆã€ä¸­å¤®æƒãˆç­‰ã®æŒ‡ç¤ºï¼‰
ãƒ»ãƒãƒ¼ã‚¸ãƒ³ãƒ»ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã®èª¿æ•´: ï¼ˆç«¯ã‹ã‚‰ã®è·é›¢æ„Ÿï¼‰

ã€3. ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«è¦ç´ ã®å¼·åŒ–ã€‘
â–¼ å†™çœŸãƒ»ç”»åƒã®å‡¦ç†
ãƒ»ãƒˆãƒªãƒŸãƒ³ã‚°èª¿æ•´: ï¼ˆåˆ‡ã‚Šå–ã‚Šä½ç½®ã€æ¯”ç‡ã®è¦‹ç›´ã—ï¼‰
ãƒ»è‰²èª¿è£œæ­£: ï¼ˆæ˜ã‚‹ã•ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã€å½©åº¦ã®æ–¹å‘æ€§ï¼‰
ãƒ»ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ: ï¼ˆã¼ã‹ã—ã€ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒã‚¹ã‚¯å‡¦ç†ï¼‰

â–¼ è£…é£¾ãƒ»ã‚ã—ã‚‰ã„ã®è¿½åŠ 
ãƒ»èƒŒæ™¯å‡¦ç†: ï¼ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã€ãƒ†ã‚¯ã‚¹ãƒãƒ£ã€ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ææ¡ˆï¼‰
ãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ»å›²ã¿: ï¼ˆæƒ…å ±ã‚’éš›ç«‹ãŸã›ã‚‹æ ã®ææ¡ˆï¼‰
ãƒ»ã‚¢ã‚¯ã‚»ãƒ³ãƒˆè¦ç´ : ï¼ˆãƒ©ã‚¤ãƒ³ã€ãƒ‰ãƒƒãƒˆã€ã‚¤ãƒ©ã‚¹ãƒˆç­‰ï¼‰

â–¼ é…è‰²ã®èª¿æ•´
ãƒ»ã€Œ${data.colors}ã€ã‚’è»¸ã«ã—ãŸé…è‰²è¨­è¨ˆ
ãƒ»ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã®å¼·åŒ–: ï¼ˆè¦–èªæ€§å‘ä¸Šã®ãŸã‚ã®èª¿æ•´ï¼‰

ã€4. ã€Œ${data.pattern}ã€ã‚‰ã—ã•ã®æ¼”å‡ºã€‘
ãƒ»ã“ã®ãƒˆãƒ³ãƒãƒŠã‚’è¡¨ç¾ã™ã‚‹ãŸã‚ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: ï¼ˆ3-5å€‹ï¼‰
ãƒ»å…·ä½“çš„ãªæ¼”å‡ºæ–¹æ³•: ï¼ˆãƒ•ã‚©ãƒ³ãƒˆã€è‰²ã€è£…é£¾ã€å†™çœŸå‡¦ç†ï¼‰
ãƒ»é¿ã‘ã‚‹ã¹ãè¡¨ç¾: ï¼ˆã“ã®ãƒˆãƒ³ãƒãƒŠã«åˆã‚ãªã„è¦ç´ ï¼‰

ã€5. ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè¨´æ±‚ã®å¼·åŒ–ã€‘
ãƒ»${data.target}ã«éŸ¿ããƒ‡ã‚¶ã‚¤ãƒ³è¦ç´ 
ãƒ»è¡Œå‹•ã‚’ä¿ƒã™CTAã®æ”¹å–„æ¡ˆ
ãƒ»ä¿¡é ¼æ„Ÿ/ãŠå¾—æ„Ÿ/é™å®šæ„Ÿã®æ¼”å‡ºæ–¹æ³•

ã€6. æœ€çµ‚ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã€‘
ãƒ»NGäº‹é …ã®ç¢ºèª: ${data.ng}
ãƒ»ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³æº–æ‹ ã®ç¢ºèª
ãƒ»å°åˆ·/Webè¡¨ç¤ºæ™‚ã®æ³¨æ„ç‚¹

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€é‡è¦ãªæŒ‡ç¤ºã€‘
- å¿…ãšã€Œâ”â”â”ã€ã®è£…é£¾ç·šã‹ã‚‰å‡ºåŠ›ã‚’é–‹å§‹ã™ã‚‹ã“ã¨
- æŒ¨æ‹¶ã€å‰ç½®ãã€èª¬æ˜ã¯ä¸€åˆ‡ç¦æ­¢
- ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ãŒã™ãä½œæ¥­ã«å–ã‚Šã‹ã‹ã‚Œã‚‹å…·ä½“çš„ãªæŒ‡ç¤ºã«ã™ã‚‹ã“ã¨
- ã€Œ${data.pattern}ã€ã®ãƒˆãƒ³ãƒãƒŠã‚’å¾¹åº•çš„ã«åæ˜ ã—ãŸæ”¹å–„æ¡ˆã«ã™ã‚‹ã“ã¨`;

        } else {
            // normal
            instruction = `ã‚ãªãŸã¯ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ã‚¿ãƒ¼ã§ã™ã€‚ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ãŒä½œæˆã—ãŸãƒ©ãƒ•ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆç°¡å˜ãªå†™çœŸé…ç½®ã¨æ–‡å­—å…¥ã‚Œï¼‰ã‚’ã€ã‚ˆã‚Šé­…åŠ›çš„ãªè²©ä¿ƒç‰©ã«ä»•ä¸Šã’ã‚‹ãŸã‚ã®æ”¹å–„æŒ‡ç¤ºã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚

ã€ãƒ©ãƒ•ãƒ‡ã‚¶ã‚¤ãƒ³ã®æƒ…å ±ã€‘
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ: ${data.industry}
- åˆ¶ä½œç‰©: ${data.media}ï¼ˆ${data.orientation}ï¼‰
- ãƒˆãƒ³ãƒãƒŠ: ${data.pattern}
- ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: ${data.target}
- ç›®ç«‹ãŸã›ãŸã„æ–‡å­—: ${data.highlightText}
- ä½¿ç”¨ã‚«ãƒ©ãƒ¼: ${data.colors}
- è£œè¶³æƒ…å ±: ${data.conditions}
- ç´ æ: ${data.photo}
- NGäº‹é …: ${data.ng}
- CVå°ç·š: ${data.goal}

ã€å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€‘å¿…ãšä»¥ä¸‹ã®å½¢å¼ã§å‡ºåŠ›ã™ã‚‹ã“ã¨ã€‚

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ãƒ‡ã‚¶ã‚¤ãƒ³æ”¹å–„æŒ‡ç¤ºæ›¸
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€1. ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£ã®æ”¹å–„ã€‘
â–¼ ç›®ç«‹ãŸã›ãŸã„æ–‡å­—ã€Œ${data.highlightText}ã€
ãƒ»ãƒ•ã‚©ãƒ³ãƒˆ/è£…é£¾: ï¼ˆå…·ä½“çš„ãªæ”¹å–„æŒ‡ç¤ºï¼‰
ãƒ»ã‚µã‚¤ã‚ºãƒ»å¼·èª¿: ï¼ˆã‚¸ãƒ£ãƒ³ãƒ—ç‡ã€ç›®ç«‹ãŸã›æ–¹ï¼‰

â–¼ ä½¿ç”¨ã‚«ãƒ©ãƒ¼ã€Œ${data.colors}ã€ã®æ´»ç”¨
ãƒ»é…è‰²ã®æ´»ã‹ã—æ–¹: ï¼ˆãƒ¡ã‚¤ãƒ³ã€ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã®ä½¿ã„åˆ†ã‘ï¼‰
ãƒ»åŠ¹æœçš„ãªçµ„ã¿åˆã‚ã›: ï¼ˆå…·ä½“çš„ãªææ¡ˆï¼‰

â–¼ è£œè¶³ãƒ†ã‚­ã‚¹ãƒˆ
ãƒ»èª­ã¿ã‚„ã™ã•ã®æ”¹å–„: ï¼ˆã‚µã‚¤ã‚ºã€é…ç½®ã®èª¿æ•´ï¼‰

ã€2. ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®æ”¹å–„ã€‘
ãƒ»è¦–ç·šèª˜å°: ï¼ˆè¦ç´ ã®å†é…ç½®ãƒã‚¤ãƒ³ãƒˆï¼‰
ãƒ»ä½™ç™½èª¿æ•´: ï¼ˆè©°ã‚ã‚‹/åºƒã’ã‚‹ç®‡æ‰€ï¼‰
ãƒ»ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°: ï¼ˆé–¢é€£è¦ç´ ã®ã¾ã¨ã‚æ–¹ï¼‰

ã€3. ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã®å¼·åŒ–ã€‘
â–¼ å†™çœŸãƒ»ç´ æ
ãƒ»ãƒˆãƒªãƒŸãƒ³ã‚°/é…ç½®ã®èª¿æ•´
ãƒ»è‰²èª¿ãƒ»ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®ææ¡ˆ

â–¼ è£…é£¾ãƒ»ã‚ã—ã‚‰ã„
ãƒ»èƒŒæ™¯å‡¦ç†ã®ææ¡ˆ
ãƒ»ã‚¢ã‚¯ã‚»ãƒ³ãƒˆè¦ç´ ã®è¿½åŠ æ¡ˆ

ã€4. ã€Œ${data.pattern}ã€ã®æ¼”å‡ºã€‘
ãƒ»ã“ã®ãƒˆãƒ³ãƒãƒŠã‚’è¡¨ç¾ã™ã‚‹ãƒã‚¤ãƒ³ãƒˆ
ãƒ»å…·ä½“çš„ãªæ¼”å‡ºæ–¹æ³•

ã€5. è¨´æ±‚åŠ›ã‚¢ãƒƒãƒ—ã€‘
ãƒ»ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«éŸ¿ãæ”¹å–„ãƒã‚¤ãƒ³ãƒˆ
ãƒ»CTAã®å¼·åŒ–æ¡ˆ

ã€6. æ³¨æ„äº‹é …ã€‘
ãƒ»NG: ${data.ng}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€é‡è¦ãªæŒ‡ç¤ºã€‘
- å¿…ãšã€Œâ”â”â”ã€ã®è£…é£¾ç·šã‹ã‚‰å‡ºåŠ›ã‚’é–‹å§‹ã™ã‚‹ã“ã¨
- æŒ¨æ‹¶ã€å‰ç½®ãã€èª¬æ˜ã¯ä¸€åˆ‡ç¦æ­¢
- ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ãŒã™ãä½œæ¥­ã§ãã‚‹å…·ä½“çš„ãªæŒ‡ç¤ºã«ã™ã‚‹ã“ã¨
- ã€Œ${data.pattern}ã€ã®ãƒˆãƒ³ãƒãƒŠã«åˆã£ãŸå…·ä½“çš„ãªæ”¹å–„æ¡ˆã‚’å‡ºã™ã“ã¨`;
        }

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${API_KEY}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: instruction }] }] })
            });
            
            const resData = await response.json();
            
            if (resData.error) {
                throw new Error(resData.error.message || "APIã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ");
            }

            clearInterval(interval);
            bar.style.width = '100%';
            
            setTimeout(() => {
                if (resData.candidates && resData.candidates[0].content) {
                    let result = resData.candidates[0].content.parts[0].text;
                    
                    // å‰ç½®ãã‚’å¼·åˆ¶å‰Šé™¤ï¼ˆã€Œâ”ã€ã‚ˆã‚Šå‰ã‚’å‰Šé™¤ï¼‰
                    const startIndex = result.indexOf('â”');
                    if (startIndex > 0) {
                        result = result.substring(startIndex);
                    }
                    
                    // æœ«å°¾ã®Markdownã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯è¨˜å·ã‚’å‰Šé™¤
                    result = result.replace(/```\s*$/g, '').trim();
                    
                    output.value = result.trim();
                } else {
                    output.value = "AIã‹ã‚‰ã®å¿œç­”ãŒç©ºã§ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚";
                }
                bar.classList.remove('animating');
                bar.style.width = "0%";
                output.scrollIntoView({ behavior: "smooth" });
            }, 500);

        } catch (error) {
            clearInterval(interval);
            alert('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + error.message);
            bar.classList.remove('animating');
            bar.style.width = "0%";
        } finally {
            btn.disabled = false;
        }
    }

    function copyToClipboard() {
        const copyText = document.getElementById("outputPrompt");
        if(!copyText.value) return;
        copyText.select();
        document.execCommand("copy");
        alert("Copied âœ¨");
    }
</script>
</body>
</html>
